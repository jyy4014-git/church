ğŸ“Œ **ì‚¬ì „ ë²ˆì—­ ê¸°ë°˜ ì§€ë„ ì•± êµ¬í˜„ ê³„íš**

---

### 1. **ë°ì´í„°ë² ì´ìŠ¤ í™•ì¥ (ë‹¤êµ­ì–´ ì§€ì›)**
#### 1.1 ê¸°ì¡´ `locations` í…Œì´ë¸” ìˆ˜ì •
```sql
ALTER TABLE locations 
ADD COLUMN name_en VARCHAR(255),   -- ì˜ì–´ ë²ˆì—­
ADD COLUMN name_es VARCHAR(255),   -- ìŠ¤í˜ì¸ì–´ ë²ˆì—­
ADD COLUMN name_zh VARCHAR(255),   -- ì¤‘êµ­ì–´ ë²ˆì—­
ADD COLUMN name_ko VARCHAR(255),   -- í•œêµ­ì–´ ë²ˆì—­
ADD COLUMN name_ja VARCHAR(255),   -- ì¼ë³¸ì–´ ë²ˆì—­   
ADD COLUMN name_vi VARCHAR(255),   -- ë² íŠ¸ë‚¨ì–´ ë²ˆì—­
ADD COLUMN name_th VARCHAR(255),   -- íƒœêµ­ì–´ ë²ˆì—­
ADD COLUMN name_id VARCHAR(255),   -- ì¸ë„ë„¤ì‹œì•„ì–´ ë²ˆì—­
ADD COLUMN name_ph VARCHAR(255),   -- í•„ë¦¬í•€ì–´ ë²ˆì—­

ADD COLUMN description_en TEXT,
ADD COLUMN description_es TEXT, 
ADD COLUMN description_zh TEXT,
ADD COLUMN description_ko TEXT,
ADD COLUMN description_ja TEXT,
ADD COLUMN description_vi TEXT,
ADD COLUMN description_th TEXT,
ADD COLUMN description_id TEXT,
ADD COLUMN description_ph TEXT;
```

CREATE TABLE user_settings (
    user_id INTEGER PRIMARY KEY REFERENCES users(id),
    language VARCHAR(10) DEFAULT 'ko' CHECK (language IN ('ko', 'en', 'es', 'zh'))
);

2. UI/UX ê°œì„  ë°©ì•ˆ
2.1 ì–¸ì–´ ì„ íƒ ê¸°ëŠ¥
ì„¤ì • í™”ë©´ì— ì–¸ì–´ ì„ íƒ ë“œë¡­ë‹¤ìš´ ì¶”ê°€

dart
Copy
// Flutter ì˜ˆì‹œ
DropdownButton(
  value: 'ko',
  items: [
    DropdownMenuItem(value: 'ko', child: Text('í•œêµ­ì–´')),
    DropdownMenuItem(value: 'en', child: Text('English')),
  ],
  onChanged: (value) => updateLanguage(value),
)
2.2 í•«ìŠ¤íŒŸ ì •ë³´ í‘œì‹œ ë¡œì§
dart
Copy
// ì‚¬ìš©ì ì–¸ì–´ì— ë”°ë¥¸ ë™ì  í…ìŠ¤íŠ¸ ë°˜í™˜
String getLocalizedText(String lang, String field) {
  switch(lang) {
    case 'en': return '$field\_en';
    case 'es': return '$field\_es';
    case 'zh': return '$field\_zh';
    case 'ko': return '$field\_ko';
    case 'ja': return '$field\_ja';
    case 'vi': return '$field\_vi';
    case 'th': return '$field\_th';
    case 'id': return '$field\_id';
    case 'ph': return '$field\_ph';
    default: return field;
  }
}

// íŒì—…ì— ì ìš©
Text(getLocalizedText(userLang, location.name)),
Text(getLocalizedText(userLang, location.description)),
3. API í™•ì¥
3.1 ì–¸ì–´ ì„¤ì • API
http
Copy
PATCH /api/v1/users/{id}/settings
ìš”ì²­ ë³¸ë¬¸:
{ "language": "en" }

ì‘ë‹µ:
{ "message": "ì–¸ì–´ ì„¤ì •ì´ enìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤" }


1. ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡° ê°œì„ 
1.1 languages í…Œì´ë¸” (ì§€ì› ì–¸ì–´ ê´€ë¦¬)
sql
Copy
CREATE TABLE languages (
    code VARCHAR(10) PRIMARY KEY,  -- ì–¸ì–´ ì½”ë“œ (ISO 639-1)
    name VARCHAR(50) NOT NULL       -- ì–¸ì–´ëª… (ì˜ˆ: 'í•œêµ­ì–´', 'English')
);

-- ì´ˆê¸° ë°ì´í„°
INSERT INTO languages (code, name) VALUES
('ko', 'í•œêµ­ì–´'),
('en', 'English'),
('es', 'EspaÃ±ol'),
('zh', 'ä¸­æ–‡');
1.2 location_translations í…Œì´ë¸” (ë²ˆì—­ ë°ì´í„° ë¶„ë¦¬)
sql
Copy
CREATE TABLE location_translations (
    id SERIAL PRIMARY KEY,
    location_id INTEGER NOT NULL REFERENCES locations(id),
    language_code VARCHAR(10) NOT NULL REFERENCES languages(code),
    name_translated VARCHAR(255) NOT NULL,
    description_translated TEXT NOT NULL,
    UNIQUE(location_id, language_code)
);
1.3 ê¸°ì¡´ locations í…Œì´ë¸” ë‹¨ìˆœí™”
sql
Copy
-- ê¸°ì¡´ ë‹¤êµ­ì–´ ì»¬ëŸ¼ ì œê±°
ALTER TABLE locations 
DROP COLUMN name_en,
DROP COLUMN name_es,
-- ... (ëª¨ë“  ì–¸ì–´ë³„ ì»¬ëŸ¼ ì‚­ì œ)
ADD COLUMN base_name VARCHAR(255);  -- ê¸°ë³¸ ì–¸ì–´(í•œêµ­ì–´) ì´ë¦„
2. ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì˜ˆì‹œ
sql
Copy
-- ê¸°ì¡´ ë°ì´í„° â†’ ìƒˆë¡œìš´ êµ¬ì¡°ë¡œ ì´ë™
INSERT INTO location_translations (location_id, language_code, name_translated, description_translated)
SELECT 
    id, 
    'en' AS language_code,
    name_en,
    description_en
FROM locations
WHERE name_en IS NOT NULL;

-- ì´í›„ ê¸°ì¡´ ì»¬ëŸ¼ ì‚­ì œ
ALTER TABLE locations DROP COLUMN name_en;


3. API ì—”ë“œí¬ì¸íŠ¸ ìˆ˜ì •
3.1 ë‹¤êµ­ì–´ ì§€ë„ ë°ì´í„° ì¡°íšŒ
http
Copy
GET /api/v1/church/map?lang=en
sql
Copy
-- SQL ì¿¼ë¦¬ ì˜ˆì‹œ
SELECT 
    l.id,
    lt.name_translated AS name,
    lt.description_translated AS description,
    l.coord_x,
    l.coord_y
FROM locations l
JOIN location_translations lt 
    ON l.id = lt.location_id
    AND lt.language_code = 'en';


4. ì¥ì 
í™•ì¥ì„±:

ìƒˆ ì–¸ì–´ ì¶”ê°€ ì‹œ í…Œì´ë¸” ìˆ˜ì • ì—†ì´ ë°ì´í„°ë§Œ ì…ë ¥ (languages í…Œì´ë¸”ì— ë ˆì½”ë“œ ì¶”ê°€)

ì˜ˆì‹œ) ì¼ë³¸ì–´ ì¶”ê°€:

sql
Copy
INSERT INTO languages (code, name) VALUES ('ja', 'æ—¥æœ¬èª');
ìœ ì§€ë³´ìˆ˜ ìš©ì´ì„±:

ë²ˆì—­ ë°ì´í„°ê°€ ë³„ë„ í…Œì´ë¸”ë¡œ ê´€ë¦¬ë˜ì–´ ì˜¤ë¥˜ ìˆ˜ì •ì´ ê°„í¸

ì¿¼ë¦¬ ìµœì í™”:

JOINì„ í†µí•œ íš¨ìœ¨ì ì¸ ë°ì´í„° ì¡°íšŒ ê°€ëŠ¥

ë°ì´í„° ë¬´ê²°ì„±:

ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ìœ¼ë¡œ ì˜ëª»ëœ ì–¸ì–´ ì½”ë“œ ì…ë ¥ ë°©ì§€

5. í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ ê°€ì´ë“œ
dart
Copy
// ì–¸ì–´ë³„ ë²ˆì—­ ë°ì´í„° ì¡°íšŒ
Future<Map<String, dynamic>> fetchLocationData(int id, String lang) async {
    final response = await dio.get(
        '/locations/$id',
        queryParameters: {'lang': lang}
    );
    return response.data;
}

// ì‚¬ìš© ì˜ˆì‹œ
final data = await fetchLocationData(101, 'en');
print(data['name']);  // "Chapel"
6. ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ê¸°ëŠ¥
ë²ˆì—­ ê´€ë¦¬ ì¸í„°í˜ì´ìŠ¤:

ì–¸ì–´ ì„ íƒ ë“œë¡­ë‹¤ìš´ â†’ í•´ë‹¹ ì–¸ì–´ì˜ ë²ˆì—­ í•„ë“œ í‘œì‹œ

ì‹¤ì‹œê°„ ì €ì¥ ê¸°ëŠ¥ (PATCH API ì—°ë™)

ë²ˆì—­ ì§„í–‰ë¥  í‘œì‹œ: